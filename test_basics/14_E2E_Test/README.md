# èª²é¡Œ14ã€ŒE2Eãƒ†ã‚¹ãƒˆã‚’æ›¸ã“ã†ã€

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<details>
<summary>Table of Contents</summary>

- [èª²é¡Œ1](#%E8%AA%B2%E9%A1%8C1)
  - [Q: äº¤äº’ã«ãƒã‚¹ã‚’é¸æŠã—ã¦ç‰‡æ–¹ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒå‹åˆ©ã—ãŸçŠ¶æ…‹ã‚’å†ç¾ã—ã¦ã¿ã¾ã—ã‚‡ã†](#q-%E4%BA%A4%E4%BA%92%E3%81%AB%E3%83%9E%E3%82%B9%E3%82%92%E9%81%B8%E6%8A%9E%E3%81%97%E3%81%A6%E7%89%87%E6%96%B9%E3%81%AE%E3%83%97%E3%83%AC%E3%82%A4%E3%83%A4%E3%83%BC%E3%81%8C%E5%8B%9D%E5%88%A9%E3%81%97%E3%81%9F%E7%8A%B6%E6%85%8B%E3%82%92%E5%86%8D%E7%8F%BE%E3%81%97%E3%81%A6%E3%81%BF%E3%81%BE%E3%81%97%E3%82%87%E3%81%86)
  - [Q: å¼•ãåˆ†ã‘ã®æ™‚ã¯ã€ŒDraw!ã€ã¨è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†](#q-%E5%BC%95%E3%81%8D%E5%88%86%E3%81%91%E3%81%AE%E6%99%82%E3%81%AFdraw%E3%81%A8%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%A6%E3%81%BF%E3%81%BE%E3%81%97%E3%82%87%E3%81%86)
  - [Q: äº¤äº’ã«ãƒã‚¹ã‚’é¸æŠã—ã¦å¼•ãåˆ†ã‘ã®æ™‚ã¯ã€ŒDraw!ã€ã¨è¡¨ç¤ºã•ã›ã¦ã¿ã¾ã—ã‚‡ã†](#q-%E4%BA%A4%E4%BA%92%E3%81%AB%E3%83%9E%E3%82%B9%E3%82%92%E9%81%B8%E6%8A%9E%E3%81%97%E3%81%A6%E5%BC%95%E3%81%8D%E5%88%86%E3%81%91%E3%81%AE%E6%99%82%E3%81%AFdraw%E3%81%A8%E8%A1%A8%E7%A4%BA%E3%81%95%E3%81%9B%E3%81%A6%E3%81%BF%E3%81%BE%E3%81%97%E3%82%87%E3%81%86)
- [èª²é¡Œ2](#%E8%AA%B2%E9%A1%8C2)
- [èª²é¡Œ3](#%E8%AA%B2%E9%A1%8C3)
- [å‚è€ƒè³‡æ–™](#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99)

</details>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## èª²é¡Œ1

èª²é¡Œã¯ [ã“ã¡ã‚‰](https://github.com/KeisukeShimokawa/react-tutorial-typescript) ã«å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

### Q: äº¤äº’ã«ãƒã‚¹ã‚’é¸æŠã—ã¦ç‰‡æ–¹ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒå‹åˆ©ã—ãŸçŠ¶æ…‹ã‚’å†ç¾ã—ã¦ã¿ã¾ã—ã‚‡ã†

### Q: å¼•ãåˆ†ã‘ã®æ™‚ã¯ã€ŒDraw!ã€ã¨è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†

### Q: äº¤äº’ã«ãƒã‚¹ã‚’é¸æŠã—ã¦å¼•ãåˆ†ã‘ã®æ™‚ã¯ã€ŒDraw!ã€ã¨è¡¨ç¤ºã•ã›ã¦ã¿ã¾ã—ã‚‡ã†

## èª²é¡Œ2

Kent.C Doddsã•ã‚“ã‚„Martin Fowlerã•ã‚“ãŒå˜ä½“ãƒ†ã‚¹ãƒˆã‚„çµåˆãƒ†ã‚¹ãƒˆã«é–¢ã—ã¦ã€ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã¨ã„ã†è€ƒãˆæ–¹ã‚’æä¾›ã—ã¦ã„ã‚‹ã€‚

![](https://martinfowler.com/articles/practical-test-pyramid/testPyramid.png)

> Figure.2 The Test Pyramid

ã“ã†ã„ãŸè€ƒãˆã‚’ã¾ã¨ã‚ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«åˆ†é¡ã§ããã†ã§ã‚ã‚‹ã€‚

|                    | å˜ä½“ãƒ†ã‚¹ãƒˆ | çµåˆãƒ†ã‚¹ãƒˆ | E2E | 
| ------------------ | ---------- | ---------- | --- | 
| å®Ÿè¡Œé€Ÿåº¦           | O          | â–²         | X   | 
| å®Ÿã‚µãƒ¼ãƒ“ã‚¹ã¸ã®è¿‘ã• | X          | â–²         | O   | 
| ä¿®æ­£ã‚³ã‚¹ãƒˆ         | O          | â–²         | X   | 

ãªãŠ `Cypress` ã§ã‚‚å¤–éƒ¨é€šä¿¡ãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ãªå‡¦ç†ã‚’ã‚¹ã‚¿ãƒ–ã§ç½®ãæ›ãˆã‚‹ã“ã¨ãŒå¯èƒ½ã§ã‚ã‚‹ã€‚

```js
it('directly stubs window.fetch to test loading indicator', () => {
// stub the "fetch(/favorite-fruits)" call from the app
cy.visit('/', {
    onBeforeLoad (win) {
    cy.stub(win, 'fetch').withArgs('/favorite-fruits')
    .resolves(
        // use Bluebird promise bundled with Cypress
        // to resolve after 2000ms
        Cypress.Promise.resolve({
        ok: true,
        json: () => ['Pineapple ğŸ'],
        }).delay(2000)
    )
    },
})
```

å‚è€ƒè³‡æ–™

- [Stubbing window.fetch](https://github.com/cypress-io/cypress-example-recipes/tree/master/examples/stubbing-spying__window-fetch)

## èª²é¡Œ3

ä»Šå›ã®èª²é¡Œã§ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã—ã¦ã‚«ã‚¹ã‚¿ãƒ å±æ€§ã‚’ `data-e2e` ã¨ã„ã†åç§°ã§è¨­å®šã—ã¦ã„ã‚‹ã€‚

ã§ã¯ãªãœã“ã®ã‚ˆã†ã«ã‚«ã‚¹ã‚¿ãƒ å±æ€§ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã§ã—ã‚‡ã†ã‹ã€‚ãƒœã‚¿ãƒ³ã‚¯ãƒ©ã‚¹ã‚’ä¸€å¾‹ã§å–å¾—ã™ã‚‹ã‚ˆã†ãªå‡¦ç†ã§ã¯ãƒ€ãƒ¡ã ã£ãŸã®ã§ã—ã‚‡ã†ã‹ã€‚ÃŸ

<details>
<summary>å›ç­”ä¾‹</summary>



- [Selecting Element](https://docs.cypress.io/guides/references/best-practices.html#Selecting-Elements)

</details>

## å‚è€ƒè³‡æ–™

- [ãƒ•ãƒ­ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ï¼ã®çŸ¥è¦‹ãŒé›†ã¾ã‚‹ã¨ã“ã‚](https://zenn.dev/seya/scraps/6f930e359d6a7c)
- [The Practical Test Pyramid](https://martinfowler.com/articles/practical-test-pyramid.html)
- [Learn the smart, efficient way to test any JavaScript application.](https://testingjavascript.com/)